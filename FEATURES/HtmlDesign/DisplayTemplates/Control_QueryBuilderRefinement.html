<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>$Resources:Microsoft.Office.Server.Search,DisplayTemplateTitle_QueryBuilderRefinementControl</title>
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:MasterPageDescription msdt:dt="string"></mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106601</mso:ContentTypeId>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
<body>
<div id="Control_QueryBuilderRefinement">
<!--#_
    var selectedRefiners = document.getElementById('selectedRefiners');
    if (selectedRefiners) {
        while (selectedRefiners.firstChild){
            selectedRefiners.removeChild(selectedRefiners.firstChild);
        }
    }
    var availableRefiners = document.getElementById('availableRefiners');
    if (availableRefiners){
        while (availableRefiners.firstChild){
            availableRefiners.removeChild(availableRefiners.firstChild);
        }
        availableRefiners.scrollTop = 0;

        if(!$isNull(ctx.ClientControl)){
            var rcs = ctx.ClientControl.get_selectedRefinementControls();
            if(!$isEmptyArray(rcs)){
                for(var i = 0; i < rcs.length; i++){
                    var rc = rcs[i];
                    if(!$isNull(rc)){
                        rc.containerId = ctx.ClientControl.get_nextUniqueId();
                        var optgroup = document.createElement('OPTGROUP');
                        optgroup.id = rc.containerId;
                        optgroup.label = rc.propertyName;
                        availableRefiners.appendChild(optgroup);
                    }
                }
            }
        }
    }
_#-->
_#= ctx.RenderItems(ctx) =#_

</div>
</body>
</html>
