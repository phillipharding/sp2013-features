<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>$Resources:Microsoft.Office.Server.Search,DisplayTemplateTitle_VideoVerticalPageItem</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">1</mso:TemplateHidden>
<mso:ManagedPropertyMapping msdt:dt="string">'Image Url':'PictureThumbnailURL;PictureURL;','Line 1':'Title','Line 1 Link Url':'Path','FileExtension':'SecondaryFileExtension','MediaDuration','ViewCount':'ViewsLifeTime','ContentTypeId','Created','PeopleInMedia','VideoFileURL'{$Resources:Microsoft.Office.Server.Search,SlotName_VideoFileURL;}:'UserEncodingURL;ExternalMediaURL;DefaultEncodingURL;'</mso:ManagedPropertyMapping>
<mso:MasterPageDescription msdt:dt="string"></mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#SearchResults;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
<body>

    <div id="Item_VideoVertical">

<!--#_      
var id = ctx.ClientControl.get_nextUniqueId();
$setResultItem(id, ctx.CurrentItem);
ctx.CurrentItem.ShowDescription = true;
ctx.CurrentItem.ShowCloseButton = true;
var hoverUrl = "~sitecollection/_catalogs/masterpage/Display Templates/Search/Item_Video_HoverPanel.js";
var hover_id = "hover_" + id;
var hoverlaunch_id = "hoverlaunch_" + id;

var encodedId = $htmlEncode(id);
var pathId = encodedId + "_itemPath";
var line1Id = encodedId + "_itemLine1";
var templateId = encodedId + "_VideoResultsPageTemplate";

var imageURL = $getItemValue(ctx, "Image Url");
var imageMarkup = Srch.U.getVideoImageWithFallbackSource(imageURL);

var linkUrl = $getItemValue(ctx, "Line 1 Link Url");
var videoFileURL = $getItemValue(ctx, "VideoFileURL");
var isRendition = !$getItemValue(ctx, "FileExtension").isEmpty;
if(isRendition && !videoFileURL.isEmpty)
{
    linkUrl = videoFileURL;
    videoFileURL.value = unescape(videoFileURL.value);
}
linkUrl.overrideValueRenderer($urlHtmlEncode);

var line1 = $getItemValue(ctx, "Line 1");
if (!line1.isNull)
{
    var truncatedFormat = function(line1)
    {
        return $htmlEncode(Srch.U.truncateEnd(line1.value, Srch.U.titleTruncationLength));
    };
    line1.overrideValueRenderer(truncatedFormat);
}

var viewCount = $getItemValue(ctx,"ViewCount");
if (!viewCount.isNull)
{
    var viewCountFormat = function(viewCount)
    {
        return $htmlEncode(String.format($resource("hp_ViewsLifeTime"), Srch.U.toFriendlyNumber(viewCount.value)));
    };
    viewCount.overrideValueRenderer(viewCountFormat);
}

var mediaDuration = $getItemValue(ctx,"MediaDuration");
if (!mediaDuration.isNull)
{
    var durationFormat = function(duration)
    {
        return $htmlEncode(Srch.U.getFormattedTimeFromSeconds(duration.value));
    };
    mediaDuration.overrideValueRenderer(durationFormat);
}

var startNewRow = !$isNull(ctx.CurrentItemIdx) && !isNaN(ctx.CurrentItemIdx) && (ctx.CurrentItemIdx + 1) % 3 == 0;
_#-->
        <div class="ms-srch-video-results ms-srch-video-results-container" id="_#= $htmlEncode(id) =#_" name="Item" data-displaytemplate="Item_VideoVertical">
            <div id="_#= $htmlEncode(hover_id) =#_" class="ms-srch-hover-outerContainer"></div>
            <div id="_#= templateId =#_">
                <div class="ms-srch-video-results-centered">
                    <a id="_#= pathId =#_" href="javascript:{}" title="_#= $htmlEncode($resource('item_Generic_OpenCalloutTooltip')) =#_" 
                            onclick="EnsureScriptParams('searchUI.js', 'HP.Init', event, '_#= $scriptEncode(id) =#_', '_#= $scriptEncode(hover_id) =#_', '_#= $scriptEncode(hoverUrl) =#_');">
                        _#= imageMarkup =#_
                    </a>
                </div>

                <div class="ms-srch-video-results-data">
                    <h3>
                        <a clicktype="Result" href="_#= linkUrl =#_" title="_#= $htmlEncode(line1.value) =#_" class="ms-srch-item-link ms-srch-video-results ms-noWrap" id="_#= line1Id =#_">
                            _#=  line1 =#_
                        </a>
                    </h3>
                    <div class="ms-displayInlineBlock">
<!--#_          
if (!mediaDuration.isNull) 
{ 
_#-->
                        _#= mediaDuration =#_
<!--#_          
}
if (!mediaDuration.isNull && !viewCount.isNull)
{
_#-->
                        &nbsp;<span class="ms-soften">|</span>&nbsp;
<!--#_
}
if (!viewCount.isNull)
{ 
_#-->
                        _#= viewCount =#_ 
<!--#_
} 
if (mediaDuration.isEmpty && viewCount.isEmpty)
{
_#-->
                       &nbsp;
<!--#_          
}
_#--> 
                    </div>
                    <div class="ms-srch-video-results-hover ms-srchnav-more-glyph">
                        <a id="_#= $htmlEncode(hoverlaunch_id) =#_" class="ms-srchnav-more-glyph" href="javascript:{}" title="_#= $htmlEncode($resource('item_Generic_OpenCalloutTooltip')) =#_" 
                                onclick="EnsureScriptParams('searchUI.js', 'HP.Init', event, '_#= $scriptEncode(id) =#_', '_#= $scriptEncode(hover_id) =#_', '_#= $scriptEncode(hoverUrl) =#_');">
                        </a>
                    </div>
                </div>
            </div>
        </div>     
<!--#_          
if(startNewRow)
{
_#-->
       <div class="ms-clear"/>
<!--#_          
}
_#--> 
    </div>

</body>
</html>
